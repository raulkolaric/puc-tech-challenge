
# 3. Mini Detector de Fraudes em TransaÃ§Ãµes

# Mini Detector de Fraudes em TransaÃ§Ãµes (Credit Card Fraud Detection)

Este projeto Ã© uma submissÃ£o para um desafio universitÃ¡rio, focado na detecÃ§Ã£o de fraudes em transaÃ§Ãµes de cartÃ£o de crÃ©dito utilizando tÃ©cnicas de Machine Learning. Ele inclui um pipeline para processamento de dados, treinamento de modelo, avaliaÃ§Ã£o e um sistema de gerenciamento de experimentos via interface de texto (TUI).
## TLDR (Importante)
O melhor modelo atingido nesse projeto Ã© classificado como "bom" com base na comunidade de Machine learning. NÃ£o consegui rodar um Grid do tamanho que eu queria, devido ao tempo. Aqui estÃ¡ a melhor "run" com um f1 de 0.87:
```bash
Experimento 2 (Realizado em: 2025-05-25 10:56:08)
  ConfiguraÃ§Ã£o dos Dados: Real CSV Data
  SMOTE no Treino: SMOTE Applied to Train Set
  ParÃ¢metros do Modelo: {'n_estimators': 150, 'max_depth': None, 'min_samples_split': 2, 'min_samples_leaf': 1, 'random_state': 42, 'verbose': 0, 'n_jobs': -1}
  Limiar de ClassificaÃ§Ã£o Usado: N/A

  MÃ©tricas (Classe 1 - Fraude):
    F1-Score:    0.8333
    PrecisÃ£o:    0.8547
    Recall:      0.8130
    Matriz de ConfusÃ£o (Fraude): 
    TP=100, FP=17, FN=23, TN=71062
```
Eu acho que daria para chegar ao (f1 0.9) com maior tempo de alteraÃ§Ã£o dos parÃ¢metros, porÃ©m devido a semana que foi dada essa atividade minhas obrigaÃ§Ãµes nÃ£o permitiram o aprofundamento maior no assunto.

Fiquei satisfeito com o score, outros treinamentos que eu fiz foram visando menor False Positives, porÃ©m o Recall ficava horroroso, por isso nÃ£o incluÃ­.

Embaixo vai uma descriÃ§Ã£o mais detalhada do projeto.
## ğŸ“„ DescriÃ§Ã£o do Projeto

O objetivo principal Ã© construir um classificador capaz de distinguir transaÃ§Ãµes fraudulentas de transaÃ§Ãµes legÃ­timas. O projeto explora:

- Carregamento e geraÃ§Ã£o de dados (reais e sintÃ©ticos).
- Engenharia de features para melhorar a performance do modelo.
- TÃ©cnicas para lidar com datasets desbalanceados (SMOTE).
- Treinamento e avaliaÃ§Ã£o de um modelo `RandomForestClassifier`.
- Uma interface de texto para configurar e executar experimentos, registrando os resultados.

## ğŸ“ Estrutura de Pastas

```
â”œâ”€â”€ data/ # Pasta para armazenar os datasets
â”‚ â””â”€â”€ creditcard.csv # Dataset principal (exemplo)
â”œâ”€â”€ notebooks/ # (Opcional) Jupyter Notebooks de anÃ¡lise/apresentaÃ§Ã£o
â”œâ”€â”€ src/ # MÃ³dulos Python auxiliares
â”‚ â”œâ”€â”€ init.py # Torna 'src' um pacote Python
â”‚ â””â”€â”€ data_input.py # FunÃ§Ãµes para carregamento, geraÃ§Ã£o e prÃ©-processamento de dados
â”œâ”€â”€ venv_fraude/ # Ambiente virtual Python (ignorado pelo Git)
â”œâ”€â”€ detector.py # Script principal do pipeline de Machine Learning
â”œâ”€â”€ ui.py # Script para a interface de texto (TUI) de gerenciamento de experimentos
â”œâ”€â”€ fraud_detection_results.json # Banco de dados JSON com resultados dos experimentos
â””â”€â”€ README.md # Este arquivo
```

# âš™ï¸ ConfiguraÃ§Ã£o (Setup)

### âœ… PrÃ©-requisitos

- Python 3.7+ (recomendado 3.8+)
- pip (gerenciador de pacotes Python)

### ğŸ”§ ConfiguraÃ§Ã£o do Ambiente Virtual

Navegue atÃ© a pasta raiz deste projeto:
```bash
cd "3. Mini Detector de Fraudes em TransaÃ§Ãµes"
```
Crie o ambiente virtual:
```bash
python -m venv venv_fraude
```
Ative o ambiente virtual:
```bash
Windows (CMD/PowerShell):
```
```bash
.\venv_fraude\Scripts\activate
```
macOS/Linux (bash/zsh):
```bash
source venv_fraude/bin/activate
```
**VocÃª verÃ¡ (venv_fraude) no inÃ­cio do seu terminal, indicando que o ambiente estÃ¡ ativo.**

## ğŸ“¦ Instalando DependÃªncias 
Gerar o arquivo requirements.txt (se ainda nÃ£o existir):

ApÃ³s instalar os pacotes necessÃ¡rios (pandas, numpy, scikit-learn, imbalanced-learn), execute:

```bash
pip freeze > requirements.txt
```
Instalar as dependÃªncias (em outro ambiente ou mÃ¡quina):
```bash
pip install -r requirements.txt
```
Principais bibliotecas utilizadas:
```bash
pandas

numpy

scikit-learn

imbalanced-learn
```
# ğŸš€ Como Executar
Certifique-se de ativar seu ambiente virtual antes de executar qualquer comando.

### 1ï¸âƒ£ Executar via Interface de Texto (Recomendado)
A interface permite configurar experimentos, escolher parÃ¢metros e visualizar resultados.
```bash
python ui.py
```
No menu, vocÃª pode:

Executar um novo experimento (selecionar tipo de dados, aplicar SMOTE, definir hiperparÃ¢metros e limiar).

Visualizar resultados anteriores salvos em fraud_detection_results.json.

### 2ï¸âƒ£ Executar o Pipeline Diretamente
Executa o pipeline com parÃ¢metros padrÃ£o definidos no script.

```bash
python detector.py
```

### 3ï¸âƒ£ Testar MÃ³dulo de Dados
Para testar carregamento, geraÃ§Ã£o de dados, engenharia de features e SMOTE:

```bash
python src/data_input.py
```

### ğŸ“Š Dados
Este projeto utiliza o dataset "Credit Card Fraud Detection", disponÃ­vel no Kaggle.

Coloque o arquivo CSV (creditcard.csv) dentro da pasta data/.

As colunas esperadas sÃ£o:
```bash
Time, V1, V2, ..., V28, Amount, Class
A coluna Class indica se a transaÃ§Ã£o Ã© fraudulenta (1) ou legÃ­tima (0).
```
### ğŸ” VisÃ£o Geral dos Scripts
**ui.py**
```bash
-Interface de texto (TUI) para o usuÃ¡rio.

-Permite configurar parÃ¢metros dos experimentos.

-Executa o pipeline (detector.py).

-Salva resultados em fraud_detection_results.json.

-Permite visualizar experimentos passados.
```
**detector.py**

FunÃ§Ã£o principal: run_fraud_detection_pipeline_with_params().
```bash

-Executa todo o pipeline de ML:

-Carregamento e prÃ©-processamento dos dados (via data_input.py).

-DivisÃ£o treino/teste.

-AplicaÃ§Ã£o de SMOTE (opcional).

-Treinamento do modelo (RandomForestClassifier).

-AvaliaÃ§Ã£o do modelo.

-Retorno de mÃ©tricas (F1-Score, PrecisÃ£o, Recall, Matriz de ConfusÃ£o).
```
**src/data_input.py**

FunÃ§Ãµes utilitÃ¡rias:
```bash
FunÃ§Ã£o	DescriÃ§Ã£o
load_csv_data()	Carrega dados CSV.
generate_synthetic_data_scratch()	Gera dados sintÃ©ticos.
engineer_features_from_data()	Aplica engenharia de features.
augment_data_smote()	Aplica SMOTE para balanceamento de classes.
```
## ğŸ§ª Experimentando
Use ui.py para testar diferentes configuraÃ§Ãµes:
```bash
Tipo de Dados: Real ou SintÃ©tico.

SMOTE: Aplicar ou nÃ£o.

HiperparÃ¢metros:

n_estimators

max_depth

min_samples_leaf

min_samples_split

Limiar de ClassificaÃ§Ã£o: Ajustar o threshold (padrÃ£o 0.5) para melhorar o trade-off entre precisÃ£o e recall.
```
### âœ… Os resultados sÃ£o armazenados em fraud_detection_results.json com:

-ConfiguraÃ§Ãµes usadas.

-MÃ©tricas (F1-Score, PrecisÃ£o, Recall da classe fraudulenta).

-Matriz de ConfusÃ£o.

## ğŸš§ TODO / Melhorias Futuras
ğŸ” Integrar GridSearchCV na ui.py para busca automÃ¡tica de hiperparÃ¢metros.

ğŸ¤– Adicionar outros algoritmos de classificaÃ§Ã£o alÃ©m do RandomForest.

ğŸ“ˆ Implementar visualizaÃ§Ãµes avanÃ§adas (ex.: curva ROC, importÃ¢ncia de features).

ğŸ”¬ Expandir a engenharia de features baseada em anÃ¡lises exploratÃ³rias.

